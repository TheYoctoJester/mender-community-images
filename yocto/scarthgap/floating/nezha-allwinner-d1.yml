header:
  version: 14
  includes:
  - include/mender-full.yml

repos:
  meta-mender-community:
    url: https://github.com/mendersoftware/meta-mender-community.git
    branch: scarthgap
    layers:
      meta-mender-riscv:

  meta-riscv:
    url: https://github.com/riscv/meta-riscv
    branch: scarthgap

machine: nezha-allwinner-d1

local_conf_header:
  nezha-allwinner-d1: |
    MENDER_FEATURES_ENABLE:append = " mender-uboot mender-image-sd "
    MENDER_FEATURES_DISABLE:append = " mender-grub mender-image-uefi "
    MENDER_IMAGE_BOOTLOADER_FILE = "u-boot-sunxi-with-spl.bin"
    MENDER_IMAGE_BOOTLOADER_BOOTSECTOR_OFFSET = "16"
    # this is just a dummy, as the current state of Mender wants a declared DTB
    MENDER_DTB_NAME_FORCE = "allwinner/sun20i-d1-nezha.dtb"
    CORE_IMAGE_EXTRA_INSTALL:append = " kernel-image kernel-modules "
